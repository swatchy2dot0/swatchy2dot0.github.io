<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Amazon Affiliate Links</title>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>
 
<h1>Amazon Affiliate Links</h1>

<div id="subPages"></div>

<div id="error"></div>

<div id="helper" style="display: none;"></div>
 
<script>
$.getJSON( "https://api.github.com/repositories/126679738/contents", function( data ) {
  $.each( data, function( key, val ) {
    $.each( val, function( key2, val2 ) {
		if (key2 == "name" && (val2+"").match("^20.*html$")) {
			var success = true;
			$( "#helper" ).load( "/"+val2, function( response, status, xhr ) {
			  console.log(val2 + " -> " + status);
			  if ( status == "error" ) {
				success = false;
				var msg = "Sorry but there was an error: ";
				$( "#error" ).html( msg + xhr.status + " " + xhr.statusText );
			  } else {
				var newHtml = "<div>" + $("#helper").html() + "</div>";
				console.log("newHtml: " + newHtml);
				$( "#subPages" ).append(newHtml);
				$( "#helper" ).html("");
			  }
			});
		}
	  })
  })
})
</script>
 
</body>
</html>
